---
title: npm 的语义版本控制
date: 2024/3/14
type: frontend
---

语义版本控制的概念很简单：所有的版本都有 3 个数字：`x.y.z`。

- 第一个数字是**主版本**。当进行不兼容的 API 更改时，则升级主版本。
- 第二个数字是**子版本**。当以向后兼容的方式添加功能时，则升级子版本。
- 第三个数字是**修复版本**。当进行向后兼容的缺陷（Bug）修复时，则升级修复版本。

该约定在所有编程语言中均被采用，每个 npm 软件包都必须遵守该约定。

## 控制符号

当运行 `npm update` 时，会根据以下控制符号进行版本更新。

- `^`：只会执行**不更改最左边非零数字**的更新。

  如果写入的是 `^0.13.0`，则当运行 `npm update` 时，可以更新到 `0.13.1`、`0.13.2` 等，但不能更新到 `0.14.0` 或更高版本。 如果写入的是 `^1.13.0`，则当运行 `npm update` 时，可以更新到 `1.13.1`、`1.14.0` 等，但不能更新到 `2.0.0` 或更高版本。

  对于最左边为零时，不更新主版本和子版本，只更新修复版本。对于最左边为非零数字时，不更新主版本，会更新子版本和修复版本。

- `~`：只会执行修复版本的更新。

  如果写入的是 `〜0.13.0`，则当运行 `npm update` 时，只会更新修复版本：即 `0.13.1` 可以，但 `0.14.0` 不可以。

- `>`：接受高于指定版本的任何版本。

- `>=`：接受等于或高于指定版本的任何版本。

- `<=`：接受等于或低于指定版本的任何版本。

- `<`：接受低于指定版本的任何版本。

- `=`：接受确切的版本。

- `-`：接受一定范围的版本。例如：`2.1.0 - 2.6.2`。

- `||`：组合集合。例如 `< 2.1 || > 2.6`。

除了符号外，还有其他的规则：

- 无符号：仅接受指定的特定版本（例如 `1.2.1`）。
- `latest`：使用可用的最新版本。
